## 一、需求

### （一）软件简述

  这是一款名为“Gun File”的文件分享平台，主要分为网页端和客户端。该平台使用Gun为核心技术，使用Javascript语言以及Vue框架进行开发。可以根据不同地区网络环境不稳定的情况，提供一个兼具CDN功能的去中心化文件共享平台，以及实现局域网内部文件分享的场景。该软件支持Web端和客户端，由上传界面和下载界面组成。在用户使用该软件的时候，可以在上传界面上传文件，前软件支持60M内的所有文件类型上传。选择文件以后，用户并可根据自己的需求选择是否进行文件加密分享、设置文件下载次数限制以及设置文件有效期限制，软件采用bcrtjs对文件传输密码进行加密，可实现文件安全传输，上传文件结束后软件会生成一个分享链接，用户可将此链接分享给他人用于下载或预览文件。在有效期内软件会为用户保存文件，用户可以在文件有效期通过文件分享链接下载文件或者预览文件，加密的文件需要输入正确的密码才能进行下载或预览，软件仅支持10M内的pdf及图片格式文件在线预览。用户进入下载界面后一旦有文件下载将减少一次下载次数，当下载次数归零时将不允许再进入下载界面，同时软件将删除下载次数为零或超出有效期的文件。


### （二）规格说明

#### 1.网页端规格说明
##### （1）用户在此平台上传要分享的文件

  首先用户在有互联网支持的环境下进入网站 ，在上传文件界面选择用户想要分享的文件，并根据自己需求选择文件是否加密，文件下载次数以及文件有效期选择，确认上传后，网站将会返回一个链接给用户，用户可以将此链接分享给其他需要下载此文件的人。

##### （2）用户通过链接下载或预览文件

  用户通过互联网访问此链接，如果链接在有效期内且链接中的文件下载次数还在设置范围内就可以进入下载界面，若文件被加密，输入密码即可下载或预览文件，如果该文件未被加密，直接可以下载或预览文件。目前预览文件仅支持PDF和图片格式预览，考虑到在线预览大文件可能会造成本地浏览器运行压力过大，拖慢运行速度，消耗CPU资源，故将文件预览大小限制在10M以内。

#### 2.客户端规格说明

##### （1）用户通过客户端在局域网内共享文件

  客户端菜单栏有开启和关闭服务器的选项，对应开启和关闭本地服务器，想要开启局域网文件分享功能，就必须开启本地服务器后上传文件，然后复制文件的pageID到另一个客户端上，即可访问文件。注意另一个客户端需要与当前客户端处在同一局域网（具体表现为在同一个WiFi或者网络环境内），那么就可以享受高速的文件传输，如果不是，客户端会默认连接到广域网服务器，进行文件上传下载，这样与Web端没有太大差别。关于更多的使用说明，请参照下方的用户说明书。

### （三）说明书

- [普通用户说明书](./用户说明书.md)
- [开发者说明书](./开发者说明书.md)

### （四）性能需求

#### 1.精度

##### （1）文件上传

- 上传文件选取：可选取任意文件格式
- 文件密码输入：可输入任意长度及符号组成的密码
- 文件保存时间：可选择1天、3天、5天、7天及10天
- 文件下载次数：可选择1、2、5、7、10次

##### （2）文件下载

         下载文件选取：可选取任意文件格式

##### （3）文件预览

          预览文件选取：仅支持预览pdf格式及所有图片格式，且文件大小不超过10M

#### 2.灵活性

      当产品投入使用后，根据用户反馈、产品测试或技术更新，可能对产品进行以下相关调整

##### (1)运行环境变化

  服务器开启在本地的8765端口，使用时请确保8765端口没有被其他进程占用。服务器可以通过访问浏览器`localhost:8765`来进行访问。主采用Windows平台的编译版本运行和调试，在时间允许的情况下，同步开发支持SUSE Linux的服务器版本

### （五）问题分析报告

#### 1.问题现象：

  对于不同地区网络环境不稳定的情况，提供一个去中心化文件分享平台，解决局域网内部文件分享情景，需要开发Web端和客户端，且web端支持部分文件的预览，还可以对文件进行加密，客户端在web端基础上支持局域网内文件的分享。

#### 2.问题分析：

  此项目要求搭建一个去中心化文件分享平台，GunDB 本身就是一个开源的去中心化数据库，为搭建平台提供了技术支持。需要开发Web端，需要选择合适的语言以及框架；支持文件预览，预测需要引入一些插件；需要搭建客户端，考虑怎样将Web端包装成客户端。在广域网内传输文件，需要将文件上传到远端服务器。客户端需要在局域网内进行文件分享，则需要将文件上传到局域网内的服务器中，这样才能在客户端中获取到局域网内其他客户端上传的文件，从而进行预览和下载操作。

#### 3.解决方法：

  以Gun为核心技术，借助GunDB实现去中心化。根据需求采用Javascipt、html作为主要语言;需要开发Web端,采用Vue.js进行开发，对文件进行预览，引入vue-pdf插件和vue-viewer插件对文件进行预览；搭建自己的gun节点，并将gun节点相互链接，最后搭建一个远端节点，并将其部署到远端服务器上，从而实现广域网文件的传输。引入客户端在本地搭建了Gun服务器，在启动客户端的时候进行部署；用户可以在客户端中自行开关服务器，只有服务器开启状态下上传下载才能成功。
